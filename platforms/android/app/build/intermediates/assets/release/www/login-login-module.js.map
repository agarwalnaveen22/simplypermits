{"version":3,"sources":["webpack:///./src/app/login/login.module.ts","webpack:///./src/app/login/login.page.html","webpack:///./src/app/login/login.page.scss","webpack:///./src/app/login/login.page.ts"],"names":[],"mappings":"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","file":"login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","module.exports = \"<ion-content padding>\\n\\n  <ion-grid>\\n    <ion-row class=\\\"item-verticle-align-center\\\">\\n\\n      <ion-col size=\\\"12\\\" [attr.size-sm]=\\\"colSize\\\" [attr.size-md]=\\\"colSize\\\" [attr.size-lg]=\\\"colSize\\\" [attr.size-xl]=\\\"colSize\\\">\\n        <ion-item>\\n          <img class=\\\"logoImg\\\" [src]=\\\"appLogo\\\" />\\n        </ion-item>\\n      </ion-col>\\n      <ion-col size=\\\"12\\\" [attr.size-sm]=\\\"colSize\\\" [attr.size-md]=\\\"colSize\\\" [attr.size-lg]=\\\"colSize\\\" [attr.size-xl]=\\\"colSize\\\">\\n        <ion-item class=\\\"margin-bottom\\\" margin-top>\\n          <ion-icon slot=\\\"start\\\" name=\\\"person\\\"></ion-icon>\\n          <ion-input [(ngModel)]=\\\"username\\\" placeholder=\\\"USERNAME OR EMAIL ADDRESS\\\"></ion-input>\\n        </ion-item>\\n\\n        <ion-item class=\\\"margin-bottom\\\">\\n          <ion-icon slot=\\\"start\\\" name=\\\"lock\\\"></ion-icon>\\n          <ion-input [(ngModel)]=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"PASSWORD\\\"></ion-input>\\n\\n        </ion-item>\\n\\n        <ion-item class=\\\"margin-bottom\\\">\\n          <ion-icon class=\\\"select-pin\\\" slot=\\\"start\\\" name=\\\"pin\\\"></ion-icon>\\n          <ion-select [(ngModel)]=\\\"city\\\" interface=\\\"popover\\\" (ionChange)=\\\"changeApiUrl()\\\" placeholder=\\\"SELECT CITY\\\">\\n            <ion-select-option *ngFor=\\\"let city of cities\\\" value=\\\"{{city.city_api_url}}|{{city.forgot_password_link}}\\\">{{city.city_name}}</ion-select-option>\\n          </ion-select>\\n        </ion-item>\\n\\n        <ion-button class=\\\"loginButton\\\" expand=\\\"block\\\" size=\\\"large\\\" (click)=\\\"login()\\\">LOGIN</ion-button>\\n        <ion-button class=\\\"forget-link\\\" (click)=\\\"openForgotPassword()\\\">FORGOT YOUR PASSWORD?</ion-button>\\n      </ion-col>\\n\\n    </ion-row>\\n  </ion-grid>\\n\\n\\n\\n</ion-content>\"","module.exports = \".item-interactive.sc-ion-label-md-h, .item-interactive .sc-ion-label-md-h {\\n  z-index: 9; }\\n\\n.input-box {\\n  position: relative; }\\n\\n.select-pin {\\n  margin-top: 0; }\\n\\n.logoImg {\\n  max-width: 85% !important;\\n  margin: 0 auto; }\\n\\n.forget-link {\\n  --box-shadow: none !important;\\n  box-shadow: none !important; }\\n\\nion-grid.hydrated {\\n  display: -ms-grid;\\n  display: grid;\\n  align-items: center;\\n  height: 100%; }\\n\\nion-row.item-verticle-align-center.hydrated {\\n  display: flex;\\n  align-items: center; }\\n\\n@media screen and (min-width: 576px) {\\n  .logoImg {\\n    max-width: 90% !important;\\n    margin: 0 auto; }\\n  .loginButton {\\n    margin-top: 25px; } }\\n\\n@media screen and (max-device-width: 768px) and (orientation: portrait) {\\n  ion-item.item.hydrated {\\n    margin-bottom: 1.2em; } }\\n\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { RestService } from '../rest.service';\nimport { NavController } from '@ionic/angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\nimport { ScreenOrientation } from '@ionic-native/screen-orientation/ngx';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  cities: any = [];\n  username: string = '';\n  password: string = '';\n  city: string = '';\n  forgotPasswordLink: string = '';\n  appLogo: string = 'assets/icon/login_logo.png';\n  deviceMode: string = '';\n  colSize: number = 12;\n  constructor(\n    private restService: RestService,\n    private navCtrl: NavController,\n    private zone: NgZone,\n    private iab: InAppBrowser,\n    private screenOrientation: ScreenOrientation\n  ) {\n  }\n\n  ngOnInit() {\n    this.getCities();\n    this.deviceMode = this.screenOrientation.type;\n    if (this.deviceMode == 'landscape-primary' || this.deviceMode == 'landscape-secondary') {\n      this.colSize = 6;\n    }\n\n    this.screenOrientation.onChange().subscribe(\n      () => {\n        this.deviceMode = this.screenOrientation.type;\n        if (this.deviceMode == 'landscape-primary' || this.deviceMode == 'landscape-secondary') {\n          this.colSize = 6;\n        } else {\n          this.colSize = 12;\n        }\n      }\n    );\n  }\n\n  async changeApiUrl() {\n    console.log(this.city);\n    if (this.city !== undefined) {\n      let fglink = this.city.split(\"|\");\n      console.log(fglink)\n      this.forgotPasswordLink = fglink[1];\n      await this.restService.setStorage(\"cityApiUrl\", fglink[0]);\n      this.restService.cityApiUrl = fglink[0];\n      console.log(this.restService.cityApiUrl)\n    }\n  }\n\n  getCities() {\n    this.restService.showLoader('Loading cities...');\n\n    let requestData = {\n      sp_action: \"sp_lpr_cities_list\"\n    }\n    this.restService.makeCommonGetRequest(requestData).then((result) => {\n      this.restService.hideLoader();\n      this.cities = result['CityApiList'];\n      console.log(this.cities);\n    }, (err) => {\n      this.restService.hideLoader();\n      if (err.error) {\n        this.restService.showAlert(\"Notice\", this.restService.setErrorMessageArray(err.error.message));\n      } else {\n        this.restService.showAlert(\"Notice\", err.statusText);\n      }\n    });\n  }\n\n  openForgotPassword() {\n    if (this.city == '' || this.city == undefined) {\n      this.restService.showToast('Please select a city');\n    } else {\n      this.iab.create(this.forgotPasswordLink);\n    }\n  }\n\n  login = async () => {\n    if (this.city == '' || this.city == undefined) {\n      this.restService.showToast('Please select a city');\n    } else if (this.username == '') {\n      this.restService.showToast('Please enter username');\n    } else if (this.password == '') {\n      this.restService.showToast('Please enter password');\n    } else {\n      await this.restService.keyBoardHide();\n      this.restService.showLoader('Logging in...');\n      let requestData = {\n        sp_action: \"sp_lpr_login\",\n        sp_user_login: this.username,\n        sp_user_password: this.password\n      }\n      this.restService.makePostRequest(requestData).then(async (result) => {\n        this.restService.hideLoader();\n        if (!result['sp_error']) {\n          await this.restService.setStorage(\"session_id\", result['session_id']);\n          let response = await this.restService.setStorage(\"userInfo\", result['sp_user']);\n          if (response) {\n            this.restService.checkLoginStatus();\n            this.navCtrl.goRoot(\"/home\");\n          }\n        } else {\n          this.restService.showAlert('Error', result['sp_error']);\n        }\n\n      }, (err) => {\n        this.restService.hideLoader();\n        if (err.error) {\n          this.restService.showAlert(\"Notice\", this.restService.setErrorMessageArray(err.error.message));\n        } else {\n          this.restService.showAlert(\"Notice\", err.statusText);\n        }\n      });\n    }\n  }\n\n}\n"],"sourceRoot":""}