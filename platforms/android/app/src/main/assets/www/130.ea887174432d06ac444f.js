(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{L6id:function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),i=function(){},r=l("pMnS"),a=l("ntG5"),o=l("M9A9"),u=l("ZYCi"),s=l("uhuC"),c=l("gIcY"),h=l("Ip0R"),p=(l("OO+k"),l("Pn9U")),d=l("mzSf"),g=l("gRf5"),m=l("2yus"),f=l("YUy7"),v=l("J/F6"),S=l("b6o4"),y=function(n,e,l,t){return new(l||(l=Promise))(function(i,r){function a(n){try{u(t.next(n))}catch(n){r(n)}}function o(n){try{u(t.throw(n))}catch(n){r(n)}}function u(n){n.done?i(n.value):new l(function(e){e(n.value)}).then(a,o)}u((t=t.apply(n,e||[])).next())})},k=function(n,e){var l,t,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,t&&(i=t[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(t,r[1])).done)return i;switch(t=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,t=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(n,a)}catch(n){r=[6,n],t=0}finally{l=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},M=function(){function n(n,e,l,t,i,r,a,o,u){var s=this;this.camera=n,this.restService=e,this.imageResizer=l,this.transfer=t,this.modalController=i,this.actionSheetController=r,this.zone=a,this.navCtrl=o,this.screenOrientation=u,this.appLogo="assets/icon/inner_header_logo.png",this.scanImage="assets/icon/scan_img.png",this.property=0,this.properties=[],this.make="",this.model="",this.year="",this.vin="",this.plate="",this.firstName="",this.lastName="",this.residentUnit="",this.email="",this.phone="",this.selectedImage="",this.isEnforcement=!1,this.deviceMode="",this.colSize1=12,this.colSize2=12,this.checkRole(),this.getProperties(),this.deviceMode=u.type,"landscape-primary"!=this.deviceMode&&"landscape-secondary"!=this.deviceMode||(this.colSize1=5,this.colSize2=7),u.onChange().subscribe(function(){s.deviceMode=u.type,"landscape-primary"==s.deviceMode||"landscape-secondary"==s.deviceMode?(s.colSize1=5,s.colSize2=7):(s.colSize1=12,s.colSize2=12)})}return n.prototype.logout=function(){this.restService.systemLogout()},n.prototype.getProperties=function(){return y(this,void 0,void 0,function(){var n,e,l=this;return k(this,function(t){switch(t.label){case 0:return[4,this.restService.getStorage("userInfo")];case 1:return n=t.sent(),e={sp_action:"sp_get_property_list",user_id:n.user_id},this.restService.showLoader("Fetching Properties"),this.restService.makePostRequest(e).then(function(n){l.restService.hideLoader(),l.zone.run(function(){return y(l,void 0,void 0,function(){return k(this,function(e){return this.properties=n.Properties,[2]})})}),console.log(l.properties)},function(n){l.restService.hideLoader(),l.restService.showAlert("Notice",n.error?l.restService.setErrorMessageArray(n.error.message):n.statusText)}),[2]}})})},n.prototype.viewVehicleSearchForm=function(){return y(this,void 0,void 0,function(){var n,e=this;return k(this,function(l){switch(l.label){case 0:return 0!=this.property&&void 0!=this.property?[3,1]:(this.restService.showToast("Please select property"),[3,4]);case 1:return[4,this.modalController.create({component:f.a})];case 2:return(n=l.sent()).onDidDismiss(function(n){Object.keys(n.data).length>0&&(e.make=n.data.make,e.model=n.data.model,e.year=n.data.year,e.vin=n.data.vin,e.plate=n.data.plate,e.searchManualVehicle())}),[4,n.present()];case 3:return[2,l.sent()];case 4:return[2]}})})},n.prototype.viewUserSearchForm=function(){return y(this,void 0,void 0,function(){var n,e=this;return k(this,function(l){switch(l.label){case 0:return 0!=this.property&&void 0!=this.property?[3,1]:(this.restService.showToast("Please select property"),[3,4]);case 1:return[4,this.modalController.create({component:v.a})];case 2:return(n=l.sent()).onDidDismiss(function(n){Object.keys(n.data).length>0&&(e.firstName=n.data.firstName,e.lastName=n.data.lastName,e.residentUnit=n.data.residentUnit,e.email=n.data.email,e.phone=n.data.phone,e.searchManualUser())}),[4,n.present()];case 3:return[2,l.sent()];case 4:return[2]}})})},n.prototype.searchManualVehicle=function(){var n=this,e={sp_action:"sp_search_permit_by_vehicle",selected_cat:this.property,vehicle_make:this.make,vehicle_model:this.model,vehicle_year:this.year,vehicle_vin:this.vin,vehicle_plate:this.plate};this.restService.showLoader("Searching Vehicles"),this.restService.makeGetRequest(e).then(function(e){return y(n,void 0,void 0,function(){return k(this,function(n){switch(n.label){case 0:return this.restService.hideLoader(),e.json&&e.json.length>0?[4,this.restService.setStorage("userData",[])]:[3,3];case 1:return n.sent(),[4,this.restService.setStorage("vehicleData",e.json)];case 2:return n.sent()&&this.navCtrl.goForward("/property-list"),[3,4];case 3:this.restService.showAlert("Notice","No vehicles found"),n.label=4;case 4:return[2]}})})},function(e){n.restService.hideLoader(),n.restService.showAlert("Notice",e.error?n.restService.setErrorMessageArray(e.error.message):e.statusText)})},n.prototype.searchManualUser=function(){var n=this,e={sp_action:"sp_search_permit_by_user",selected_cat:this.property,first_name:this.firstName,last_name:this.lastName,email_address:this.email,phone_number:this.phone,unit_number:this.residentUnit};this.restService.showLoader("Searching Users"),this.restService.makeGetRequest(e).then(function(e){return y(n,void 0,void 0,function(){return k(this,function(n){switch(n.label){case 0:return this.restService.hideLoader(),e.json&&e.json.length>0?[4,this.restService.setStorage("vehicleData",[])]:[3,3];case 1:return n.sent(),[4,this.restService.setStorage("userData",e.json)];case 2:return n.sent()&&this.navCtrl.goForward("/property-list"),[3,4];case 3:this.restService.showAlert("Notice","No vehicles found"),n.label=4;case 4:return[2]}})})},function(e){n.restService.hideLoader(),n.restService.showAlert("Notice",e.error?n.restService.setErrorMessageArray(e.error.message):e.statusText)})},n.prototype.takePicture=function(){return y(this,void 0,void 0,function(){var n;return k(this,function(e){return 0==this.property||void 0==this.property?this.restService.showToast("Please select property"):((n={quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0}).sourceType=1,this.launchProgram(n)),[2]})})},n.prototype.launchProgram=function(n){var e=this;this.camera.getPicture(n).then(function(n){e.selectedImage=n,e.viewPicture()},function(n){e.restService.showAlert("Notice",JSON.stringify(n))})},n.prototype.viewPicture=function(){return y(this,void 0,void 0,function(){return k(this,function(n){return this.scanPlate(),[2]})})},n.prototype.scanPlate=function(){var n=this,e=this.transfer.create();this.restService.showLoader("Sending Image"),e.upload(this.selectedImage,this.restService.cityApiUrl+"?sp_action=sp_permit_check_vehicle_image&selected_cat="+this.property,{fileKey:"uploadFileName",fileName:"name.jpg",chunkedMode:!1,mimeType:"multipart/form-data"}).then(function(e){return y(n,void 0,void 0,function(){return k(this,function(n){switch(n.label){case 0:return this.restService.hideLoader(),console.log(e),(e=JSON.parse(e.response)).json.length>0?[4,this.restService.setStorage("userData",[])]:[3,3];case 1:return n.sent(),[4,this.restService.setStorage("vehicleData",e.json)];case 2:return n.sent()&&this.navCtrl.goForward("/property-list"),[3,5];case 3:return[4,this.restService.setStorage("plateData",e.plateData)];case 4:n.sent()&&this.navCtrl.goForward("/no-permit-result"),n.label=5;case 5:return[2]}})})},function(e){n.restService.hideLoader(),n.restService.showAlert("Notice",JSON.stringify(e))})},n.prototype.checkRole=function(){return y(this,void 0,void 0,function(){var n;return k(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.restService.getStorage("userInfo")];case 1:return-1!==e.sent().roles.indexOf("enforcement")&&(this.isEnforcement=!0),[3,3];case 2:return n=e.sent(),console.log(n),this.navCtrl.goRoot("/login"),[3,3];case 3:return[2]}})})},n}(),b=l("9opb"),w=l("aa6e"),C=l("tXrQ"),_=t.La({encapsulation:0,styles:[['ion-row[_ngcontent-%COMP%]{border:.5px solid;margin-top:5px}.scanImage[_ngcontent-%COMP%]{width:60%;margin:15% auto}@media screen and (min-width:576px){.scanImage[_ngcontent-%COMP%]{width:90%;margin:5% auto}}@media screen and (min-width:768px) and (orientation:portrait){.scanImage[_ngcontent-%COMP%]{width:60%;margin:5% auto}}.hintIcon[_ngcontent-%COMP%]{background:#28223d;margin-bottom:5%;float:left;width:100%}.hintIcon[_ngcontent-%COMP%]   ion-icon.hydrated[_ngcontent-%COMP%]{position:absolute;left:0;top:0;margin:0;width:2em;height:100%;background:#5f2877}.hintIcon[_ngcontent-%COMP%]   .sc-ion-label-md-h[_ngcontent-%COMP%]{margin-left:3em}.ad-search[_ngcontent-%COMP%]{float:left;width:100%;margin-bottom:5%;background:0 0!important;position:relative}.ad-search[_ngcontent-%COMP%]   .sc-ion-label-md-h[_ngcontent-%COMP%]{padding-left:0!important;left:0;z-index:9;position:absolute}ion-select[_ngcontent-%COMP%]{background:#2c2649}ion-button.logout-btn[_ngcontent-%COMP%]::before{content:"Logout";position:absolute;text-align:center;display:block;color:#fff;left:0;right:0;top:.25em}ion-button.logout-btn[_ngcontent-%COMP%]{width:6em;position:relative}ion-button.logout-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:1em}']],data:{}});function N(n){return t.ab(0,[(n()(),t.Na(0,0,null,null,2,"ion-select-option",[],null,null,null,null,null)),t.Ma(1,16384,null,0,a.Ja,[t.k],{value:[0,"value"]},null),(n()(),t.Za(2,null,["",""]))],function(n,e){n(e,1,0,t.Pa(1,"",e.context.$implicit.id,""))},function(n,e){n(e,2,0,e.context.$implicit.name)})}function P(n){return t.ab(0,[(n()(),t.Na(0,0,null,null,7,"ion-item",[["class","hintIcon"]],null,[[null,"click"]],function(n,e,l){var i=!0,r=n.component;return"click"===e&&(i=!1!==t.Wa(n,2).onClick(l)&&i),"click"===e&&(i=!1!==r.viewUserSearchForm()&&i),i},null,null)),t.Ma(1,16384,null,0,a.F,[t.k],null,null),t.Ma(2,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(3,0,null,null,1,"ion-icon",[["name","people"],["slot","start"]],null,null,null,null,null)),t.Ma(4,16384,null,0,a.A,[t.k],{name:[0,"name"]},null),(n()(),t.Na(5,0,null,null,2,"ion-label",[],null,null,null,null,null)),t.Ma(6,16384,null,0,a.L,[t.k],null,null),(n()(),t.Za(-1,null,["SEARCH PERMITS BY USER"]))],function(n,e){n(e,4,0,"people")},null)}function z(n){return t.ab(0,[(n()(),t.Na(0,0,null,null,25,"ion-header",[],null,null,null,null,null)),t.Ma(1,16384,null,0,a.y,[t.k],null,null),(n()(),t.Na(2,0,null,null,23,"ion-toolbar",[],null,null,null,null,null)),t.Ma(3,16384,null,0,a.Xa,[t.k],null,null),(n()(),t.Na(4,0,null,null,5,"ion-buttons",[["class","logoHeader"],["slot","start"]],null,null,null,null,null)),t.Ma(5,16384,null,0,a.g,[],null,null),(n()(),t.Na(6,0,null,null,3,"ion-button",[],null,[[null,"click"]],function(n,e,l){var i=!0;return"click"===e&&(i=!1!==t.Wa(n,8).onClick(l)&&i),i},null,null)),t.Ma(7,16384,null,0,a.f,[t.k],null,null),t.Ma(8,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(9,0,null,null,0,"img",[["slot","start"]],[[8,"src",4]],null,null,null,null)),(n()(),t.Na(10,0,null,null,8,"ion-select",[["interface","popover"],["placeholder","Select One"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,e,l){var i=!0,r=n.component;return"ionChange"===e&&(i=!1!==t.Wa(n,11)._handleChangeEvent(l.target.value)&&i),"ionBlur"===e&&(i=!1!==t.Wa(n,11)._handleBlurEvent()&&i),"ngModelChange"===e&&(i=!1!==(r.property=l)&&i),i},null,null)),t.Ma(11,16384,null,0,s.a,[t.k],null,null),t.Xa(1024,null,c.b,function(n){return[n]},[s.a]),t.Ma(13,671744,null,0,c.e,[[8,null],[8,null],[8,null],[6,c.b]],{model:[0,"model"]},{update:"ngModelChange"}),t.Xa(2048,null,c.c,null,[c.e]),t.Ma(15,16384,null,0,c.d,[[4,c.c]],null,null),t.Ma(16,16384,null,0,a.Ia,[t.k],{placeholder:[0,"placeholder"],interface:[1,"interface"]},{ionChange:"ionChange",ionBlur:"ionBlur"}),(n()(),t.Ea(16777216,null,null,1,null,N)),t.Ma(18,278528,null,0,h.i,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(n()(),t.Na(19,0,null,null,6,"ion-buttons",[["slot","end"]],null,null,null,null,null)),t.Ma(20,16384,null,0,a.g,[],null,null),(n()(),t.Na(21,0,null,null,4,"ion-button",[["class","logout-btn"]],null,[[null,"click"]],function(n,e,l){var i=!0,r=n.component;return"click"===e&&(i=!1!==t.Wa(n,23).onClick(l)&&i),"click"===e&&(i=!1!==r.logout()&&i),i},null,null)),t.Ma(22,16384,null,0,a.f,[t.k],null,null),t.Ma(23,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(24,0,null,null,1,"ion-icon",[["class","logoutIcon"],["name","ios-log-out"],["slot","icon-only"]],null,null,null,null,null)),t.Ma(25,16384,null,0,a.A,[t.k],{name:[0,"name"]},null),(n()(),t.Na(26,0,null,null,29,"ion-content",[["padding",""]],null,null,null,null,null)),t.Ma(27,16384,null,0,a.r,[t.k],null,null),(n()(),t.Na(28,0,null,null,27,"ion-grid",[],null,null,null,null,null)),t.Ma(29,16384,null,0,a.x,[t.k],null,null),(n()(),t.Na(30,0,null,null,25,"ion-row",[],null,null,null,null,null)),t.Ma(31,16384,null,0,a.Ea,[],null,null),(n()(),t.Na(32,0,null,null,5,"ion-col",[["size","12"]],[[1,"size-sm",0],[1,"size-md",0],[1,"size-lg",0],[1,"size-xl",0]],null,null,null,null)),t.Ma(33,16384,null,0,a.q,[t.k],{size:[0,"size"]},null),(n()(),t.Na(34,0,null,null,3,"ion-item",[],null,[[null,"click"]],function(n,e,l){var i=!0,r=n.component;return"click"===e&&(i=!1!==t.Wa(n,36).onClick(l)&&i),"click"===e&&(i=!1!==r.takePicture()&&i),i},null,null)),t.Ma(35,16384,null,0,a.F,[t.k],null,null),t.Ma(36,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(37,0,null,null,0,"img",[["class","scanImage"]],[[8,"src",4]],null,null,null,null)),(n()(),t.Na(38,0,null,null,17,"ion-col",[["size","12"]],[[1,"size-sm",0],[1,"size-md",0],[1,"size-lg",0],[1,"size-xl",0]],null,null,null,null)),t.Ma(39,16384,null,0,a.q,[t.k],{size:[0,"size"]},null),(n()(),t.Na(40,0,null,null,5,"ion-item",[["class","ad-search"]],null,[[null,"click"]],function(n,e,l){var i=!0;return"click"===e&&(i=!1!==t.Wa(n,42).onClick(l)&&i),i},null,null)),t.Ma(41,16384,null,0,a.F,[t.k],null,null),t.Ma(42,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(43,0,null,null,2,"ion-label",[],null,null,null,null,null)),t.Ma(44,16384,null,0,a.L,[t.k],null,null),(n()(),t.Za(-1,null,["ADVANCED SEARCH"])),(n()(),t.Na(46,0,null,null,7,"ion-item",[["class","hintIcon"]],null,[[null,"click"]],function(n,e,l){var i=!0,r=n.component;return"click"===e&&(i=!1!==t.Wa(n,48).onClick(l)&&i),"click"===e&&(i=!1!==r.viewVehicleSearchForm()&&i),i},null,null)),t.Ma(47,16384,null,0,a.F,[t.k],null,null),t.Ma(48,16384,null,0,o.a,[[2,u.l],t.k],null,null),(n()(),t.Na(49,0,null,null,1,"ion-icon",[["name","car"],["slot","start"]],null,null,null,null,null)),t.Ma(50,16384,null,0,a.A,[t.k],{name:[0,"name"]},null),(n()(),t.Na(51,0,null,null,2,"ion-label",[],null,null,null,null,null)),t.Ma(52,16384,null,0,a.L,[t.k],null,null),(n()(),t.Za(-1,null,["SEARCH PERMITS BY VEHICLE"])),(n()(),t.Ea(16777216,null,null,1,null,P)),t.Ma(55,16384,null,0,h.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,13,0,l.property),n(e,16,0,"Select One","popover"),n(e,18,0,l.properties),n(e,25,0,"ios-log-out"),n(e,33,0,"12"),n(e,39,0,"12"),n(e,50,0,"car"),n(e,55,0,!l.isEnforcement)},function(n,e){var l=e.component;n(e,9,0,l.appLogo),n(e,10,0,t.Wa(e,15).ngClassUntouched,t.Wa(e,15).ngClassTouched,t.Wa(e,15).ngClassPristine,t.Wa(e,15).ngClassDirty,t.Wa(e,15).ngClassValid,t.Wa(e,15).ngClassInvalid,t.Wa(e,15).ngClassPending),n(e,32,0,l.colSize1,l.colSize1,l.colSize1,l.colSize1),n(e,37,0,l.scanImage),n(e,38,0,l.colSize2,l.colSize2,l.colSize2,l.colSize2)})}var I=t.Ja("app-home",M,function(n){return t.ab(0,[(n()(),t.Na(0,0,null,null,1,"app-home",[],null,null,null,z,_)),t.Ma(1,49152,null,0,M,[p.a,m.a,d.a,g.a,b.a,w.a,t.x,C.a,S.a],null,null)],null,null)},{},{},[]),O=l("95zI"),E=l("apKv"),L=l("B4/3");l.d(e,"HomePageModuleNgFactory",function(){return x});var x=t.Ka(i,[],function(n){return t.Ua([t.Va(512,t.j,t.Z,[[8,[r.a,I]],[3,t.j],t.v]),t.Va(4608,h.l,h.k,[t.s,[2,h.r]]),t.Va(4608,c.g,c.g,[]),t.Va(4608,O.a,O.a,[t.x,t.g]),t.Va(4608,b.a,b.a,[O.a,t.j,t.p]),t.Va(4608,E.a,E.a,[O.a,t.j,t.p]),t.Va(1073742336,h.b,h.b,[]),t.Va(1073742336,c.f,c.f,[]),t.Va(1073742336,c.a,c.a,[]),t.Va(1073742336,L.a,L.a,[]),t.Va(1073742336,u.m,u.m,[[2,u.s],[2,u.l]]),t.Va(1073742336,i,i,[]),t.Va(1024,u.j,function(){return[[{path:"",component:M}]]},[])])})}}]);